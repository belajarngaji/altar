<!DOCTYPE html>
<html lang="id" class="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dashboard Kuis</title>
  
  <!-- Tailwind & Chart.js -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <!-- Custom CSS -->
  <link rel="stylesheet" href="css/dashboard.css" />

  <!-- Supabase Client -->
  <script src="js/supabase-client.js" defer></script>

  <!-- Dashboard Logic -->
  <script src="js/dashboard.js" defer></script>
</head>
<body class="antialiased bg-gray-900 text-white">
  <header class="bg-gray-800 shadow-md p-4 sticky top-0 z-10">
    <div class="max-w-7xl mx-auto">
      <h1 class="text-2xl font-bold text-white flex items-center gap-3">
        Dashboard Admin Kuis
      </h1>
    </div>
  </header>

  <main class="p-4 sm:p-6 md:p-8 max-w-7xl mx-auto">
    <div id="loading-state" class="text-center py-20">Memuat...</div>
    <div id="error-state" class="hidden text-red-400 text-center py-20">Gagal memuat data!</div>

    <div id="main-content" class="hidden">
      <!-- KPI Cards -->
      <section class="grid grid-cols-1 sm:grid-cols-2 gap-6 mb-8">
        <a href="users/" class="kpi-card rounded-lg p-6 block bg-gray-700">
          <h3 class="text-sm font-medium text-gray-400">Total Pengguna</h3>
          <p id="total-users" class="text-3xl font-bold mt-2">0</p>
        </a>
        <div class="kpi-card rounded-lg p-6 bg-gray-700">
          <h3 class="text-sm font-medium text-gray-400">Kuis Hari Ini</h3>
          <p id="quiz-attempts-today" class="text-3xl font-bold mt-2">0</p>
        </div>
      </section>

      <!-- Leaderboard -->
      <section class="grid grid-cols-1 lg:grid-cols-5 gap-6 mb-8">
        <div class="lg:col-span-3 bg-gray-800 border border-gray-700 rounded-lg p-6">
          <h3 class="font-semibold text-white mb-4">üèÜ Leaderboard - Top 10</h3>
          <table class="w-full text-sm text-left text-gray-300">
            <thead class="text-xs text-gray-400 uppercase bg-gray-700/50">
              <tr>
                <th class="py-3 px-6">Peringkat</th>
                <th class="py-3 px-6">Pengguna</th>
                <th class="py-3 px-6">Total Skor</th>
              </tr>
            </thead>
            <tbody id="leaderboard-body"></tbody>
          </table>
        </div>

        <!-- Popular Quizzes -->
        <div class="lg:col-span-2 bg-gray-800 border border-gray-700 rounded-lg p-6 h-96">
          <h3 class="font-semibold text-white mb-4">Kuis Terpopuler</h3>
          <canvas id="popular-quizzes-chart"></canvas>
        </div>
      </section>

      <!-- Recent Activities -->
      <section>
        <h3 class="text-xl font-semibold text-white mb-4">Aktivitas Terbaru</h3>
        <table class="w-full text-sm text-left text-gray-300 bg-gray-800 border border-gray-700 rounded-lg">
          <thead class="text-xs text-gray-400 uppercase bg-gray-700/50">
            <tr>
              <th class="py-3 px-6">Pengguna</th>
              <th class="py-3 px-6">Nama Kuis</th>
              <th class="py-3 px-6">Skor</th>
              <th class="py-3 px-6">Waktu</th>
            </tr>
          </thead>
          <tbody id="recent-activity-body"></tbody>
        </table>
      </section>
    </div>
  </main>
</body>
</html>